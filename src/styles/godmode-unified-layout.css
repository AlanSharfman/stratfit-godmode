/* src/styles/godmode-unified-layout.css */
/* STRATFIT GOD MODE — TRUE FRAMEWORK LAYOUT */
/* The Rack System: Perfect height alignment across all panels */

/* ============================================================================
   RESET: Lock viewport - NO SCROLLING
   ============================================================================ */

html, body, #root {
  height: 100vh !important;
  max-height: 100vh !important;
  overflow: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
}

.app,
[class*="App"] {
  height: 100vh !important;
  max-height: 100vh !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
}

/* ============================================================================
   HEADER — Fixed 56px (UnifiedHeader handles this)
   ============================================================================ */

.unified-header,
header.unified-header {
  flex-shrink: 0 !important;
  height: 56px !important;
  min-height: 56px !important;
  max-height: 56px !important;
}

/* Hide old header */
.header:not(.unified-header) {
  display: none !important;
}

/* ============================================================================
   MAIN CONTENT — 3-Column Grid, ALL START AT TOP
   ============================================================================ */

.main-content,
[class*="main-content"],
[class*="mainContent"] {
  flex: 1 !important;
  display: grid !important;
  /* MOUNTAIN REDUCED 45%: Even wider side panels */
  grid-template-columns: 420px 1fr 480px !important;
  grid-template-rows: 1fr !important;
  gap: 16px !important;
  padding: 16px !important;
  height: calc(100vh - 56px) !important;
  max-height: calc(100vh - 56px) !important;
  overflow: hidden !important;
  background: transparent !important;
  align-items: stretch !important; /* All columns same height */
}

/* ============================================================================
   LEFT COLUMN — Control Panel with JEWEL BEZEL
   ============================================================================ */

.left-column,
[class*="left-column"],
aside.left-column {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  max-height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  
  /* JEWEL BEZEL: Darker 70% opacity */
  background: rgba(15, 23, 42, 0.7) !important;
  
  /* Heavy frosted glass */
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  
  /* The "Jewel" Inner Glow */
  box-shadow: 
    inset 0 1px 0 0 rgba(255, 255, 255, 0.1),
    inset 0 0 0 1px rgba(0, 240, 255, 0.05),
    0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
  
  /* Machined border */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  
  /* Tight precision curve */
  border-radius: 10px !important;
  padding: 0 !important;
  
  /* Subtle scrollbar */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(34, 211, 238, 0.2) transparent !important;
}

.left-column::-webkit-scrollbar {
  width: 4px !important;
}

.left-column::-webkit-scrollbar-track {
  background: transparent !important;
}

.left-column::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 2px !important;
}

/* Hide Active Situation - it's in header now */
.scenario-area,
[class*="scenario-area"],
[class*="ActiveScenario"]:not(.unified-header *) {
  display: none !important;
}

/* Hide spacer */
.sf-leftSpacer,
[class*="sf-leftSpacer"] {
  display: none !important;
}

/* sf-leftStack - full height, no gaps */
.sf-leftStack,
[class*="sf-leftStack"] {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  gap: 0 !important;
  padding: 0 !important;
}

/* Sliders container - full height */
.sliders-container,
[class*="sliders-container"] {
  flex: 1 !important;
  height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  border: none !important;
  box-shadow: none !important;
  padding: 12px !important;
}

/* ============================================================================
   CENTER COLUMN — KPIs at top, Mountain below
   ============================================================================ */

.center-column,
[class*="center-column"],
main.center-column {
  display: flex !important;
  flex-direction: column !important;
  gap: 12px !important;
  height: 100% !important;
  max-height: 100% !important;
  overflow: hidden !important;
  /* Center the smaller mountain */
  justify-content: flex-start !important;
  align-items: stretch !important;
}

/* ============================================================================
   KPI SECTION — JEWEL BOX GEOMETRY (180px Fixed Height)
   ============================================================================ */

.kpi-section,
[class*="kpi-section"],
[data-tour="kpis"] {
  flex-shrink: 0 !important;
  display: flex !important;
  justify-content: center !important;
  padding: 0 !important;
  margin: 0 !important;
  margin-bottom: 16px !important;
  transform: none !important;
  /* Fixed KPI row height - JEWEL BOX */
  height: 180px !important;
  min-height: 180px !important;
  max-height: 180px !important;
}

/* KPI Console - centered container with max-width */
.kpi-command-console {
  width: 100% !important;
  max-width: 1200px !important;
  margin: 0 auto !important;
  height: 100% !important;
}

.top-kpi-row {
  display: flex !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
}

.console-container {
  width: 100% !important;
  max-width: 1200px !important;
  margin: 0 auto !important;
  height: 100% !important;
}

/* KPI GROUPS — Rigid 3-column grid */
.kpi-groups {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap: 24px !important;
  width: 100% !important;
  height: 100% !important;
  align-items: stretch !important;
}

/* Override the flex sizing */
.sf-kpi--wide,
.sf-kpi--narrow {
  flex: none !important;
  width: 100% !important;
  height: 100% !important;
}

/* ============================================================================
   KPI BEZEL — "JEWEL BOX" MACHINED GLASS (180px Box)
   ============================================================================ */

[class*="KPIBezel"],
[class*="kpi-bezel"],
[data-kpi-group] > div:first-child {
  /* JEWEL BOX: 180px fixed height */
  height: 180px !important;
  min-height: 180px !important;
  max-height: 180px !important;
  
  /* LOWER OPACITY so widgets pop through (40%) */
  background: rgba(15, 23, 42, 0.4) !important;
  
  /* Heavy frosted glass */
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  
  /* The "Jewel" Inner Glow - CRUCIAL */
  box-shadow: 
    inset 0 0 0 1px rgba(0, 240, 255, 0.1),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.1),
    0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
  
  /* Machined border */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  
  /* Tight precision curve */
  border-radius: 10px !important;
  
  /* Internal flex layout - push content apart */
  display: flex !important;
  flex-direction: column !important;
  justify-content: space-between !important;
  padding: 14px !important;
  overflow: visible !important;
}

/* ============================================================================
   KPI INSTRUMENT CARDS — COMPACT JEWEL BOXES
   ============================================================================ */

.kpi-instrument {
  position: relative !important;
  min-height: 120px !important;
  max-height: 140px !important;
}

.instrument-border {
  /* Glass morphism border */
  background: linear-gradient(
    160deg,
    rgba(255, 255, 255, 0.12) 0%,
    rgba(255, 255, 255, 0.05) 30%,
    rgba(0, 0, 0, 0.15) 50%,
    rgba(0, 240, 255, 0.08) 80%,
    rgba(255, 255, 255, 0.1) 100%
  ) !important;
  border-radius: 10px !important;
  padding: 2px !important;
  box-shadow: inset 0 0 0 1px rgba(0, 240, 255, 0.08) !important;
}

.instrument-well {
  /* Deep void background */
  background: rgba(8, 12, 20, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.06) !important;
  border-radius: 8px !important;
  padding: 10px 12px !important;
  min-height: 110px !important;
  display: grid !important;
  grid-template-rows: auto auto 1fr !important;
  gap: 4px !important;
}

/* ============================================================================
   KPI TYPOGRAPHY — GOD MODE
   ============================================================================ */

.instrument-label {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.2em !important;
  color: rgba(34, 211, 238, 0.8) !important;
}

.value-display {
  font-family: 'Inter', -apple-system, sans-serif !important;
  font-size: 22px !important;
  font-weight: 700 !important;
  color: rgba(255, 255, 255, 0.95) !important;
  letter-spacing: -0.02em !important;
  line-height: 1.1 !important;
}

.value-unit {
  font-size: 11px !important;
  color: rgba(255, 255, 255, 0.4) !important;
  margin-left: 4px !important;
}

/* ============================================================================
   KPI WIDGETS — FORCE VISIBLE WITH HIGH Z-INDEX
   ============================================================================ */

.instrument-visual {
  position: relative !important;
  z-index: 50 !important; /* HIGH z-index to pop above glass */
  opacity: 1 !important;
  visibility: visible !important;
  min-height: 36px !important;
  max-height: 44px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  /* Internal bezel for chart area */
  background: rgba(0, 0, 0, 0.3) !important;
  border-radius: 6px !important;
  border: 1px solid rgba(0, 240, 255, 0.1) !important;
  padding: 6px 8px !important;
  margin-top: auto !important;
  overflow: visible !important;
}

.instrument-visual > * {
  z-index: 51 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

.instrument-svg,
.instrument-visual svg {
  width: 100% !important;
  height: 100% !important;
  min-height: 28px !important;
  max-height: 36px !important;
  opacity: 1 !important;
  visibility: visible !important;
  z-index: 52 !important;
  /* Cyan glow bloom */
  filter: drop-shadow(0 0 6px rgba(0, 217, 255, 0.6)) !important;
}

/* Force all SVG strokes to be Cyan */
.instrument-visual svg path,
.instrument-visual svg line,
.instrument-visual svg polyline,
.instrument-visual svg rect {
  stroke: #00D9FF !important;
}

/* Canvas elements (Chart.js) */
.instrument-visual canvas {
  z-index: 52 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Active state glow */
.kpi-instrument.active .instrument-border {
  background: linear-gradient(
    160deg,
    rgba(34, 211, 238, 0.5) 0%,
    rgba(255, 255, 255, 0.1) 30%,
    rgba(0, 0, 0, 0.15) 50%,
    rgba(34, 211, 238, 0.15) 80%,
    rgba(0, 240, 255, 0.4) 100%
  ) !important;
  box-shadow: 
    inset 0 0 0 1px rgba(0, 240, 255, 0.3),
    0 0 30px rgba(34, 211, 238, 0.2) !important;
}

.kpi-instrument.active .instrument-label {
  color: rgba(34, 211, 238, 1) !important;
  text-shadow: 0 0 10px rgba(34, 211, 238, 0.5) !important;
}

/* Hover state */
.kpi-instrument:hover .instrument-border {
  box-shadow: 
    inset 0 0 0 1px rgba(0, 240, 255, 0.15),
    0 0 20px rgba(34, 211, 238, 0.1) !important;
}

/* Glow layer */
.instrument-glow {
  position: absolute !important;
  inset: -10px !important;
  background: radial-gradient(ellipse at center, rgba(34, 211, 238, 0.15), transparent 70%) !important;
  opacity: 0 !important;
  pointer-events: none !important;
  z-index: 0 !important;
  transition: opacity 0.3s ease !important;
}

.kpi-instrument:hover .instrument-glow {
  opacity: 0.5 !important;
}

.kpi-instrument.active .instrument-glow {
  opacity: 1 !important;
}

/* ============================================================================
   MOUNTAIN COMPOUND — Fills remaining center space
   ============================================================================ */

[class*="sfCenterRoot"],
[class*="CenterViewPanel"] {
  flex: 1 !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  background: #000 !important;
  border-radius: 12px !important;
  border: 1px solid rgba(255, 255, 255, 0.04) !important;
  overflow: hidden !important;
}

[class*="sfMountainStage"] {
  flex: 1 !important;
  min-height: 0 !important;
  border-radius: 12px !important;
}

/* Hide ViewModeSelector inside mountain - tabs are in header */
[class*="sfViewSelectorInner"],
[class*="ViewModeSelector"]:not(.unified-header *) {
  display: none !important;
}

/* ============================================================================
   RIGHT COLUMN — Scenario Intelligence with THICK JEWEL BEZEL
   ============================================================================ */

.right-column,
[class*="right-column"],
aside.right-column,
[data-tour="intel"] {
  display: flex !important;
  flex-direction: column !important;
  height: calc(100% - 12px) !important; /* Account for top margin */
  max-height: calc(100% - 12px) !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  
  /* JEWEL BEZEL: Darker 70% opacity */
  background: rgba(15, 23, 42, 0.7) !important;
  
  /* Heavy frosted glass */
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  
  /* THICK BEZEL: Enhanced inner glow and shadows */
  box-shadow: 
    inset 0 2px 0 0 rgba(255, 255, 255, 0.12),
    inset 0 0 0 2px rgba(0, 240, 255, 0.08),
    inset 0 -1px 0 0 rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.08),
    0 30px 60px -15px rgba(0, 0, 0, 0.85) !important;
  
  /* THICKER Machined border */
  border: 2px solid rgba(255, 255, 255, 0.12) !important;
  
  /* Precision curve */
  border-radius: 12px !important;
  padding: 0 !important;
  
  /* MOVE DOWN 3mm (~11px) */
  margin-top: 11px !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  margin-bottom: 0 !important;
  align-self: flex-start !important;
  
  /* Subtle scrollbar */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(34, 211, 238, 0.2) transparent !important;
}

.right-column::-webkit-scrollbar,
[data-tour="intel"]::-webkit-scrollbar {
  width: 4px !important;
}

.right-column::-webkit-scrollbar-track,
[data-tour="intel"]::-webkit-scrollbar-track {
  background: transparent !important;
}

.right-column::-webkit-scrollbar-thumb,
[data-tour="intel"]::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 2px !important;
}

/* AI Intelligence Component fills the right column */
[class*="AIIntelligence"],
[class*="ScenarioIntelligence"],
[class*="aiIntelligence"] {
  flex: 1 !important;
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}

/* ============================================================================
   RESPONSIVE
   ============================================================================ */

@media (max-width: 1600px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 400px 1fr 460px !important;
    gap: 14px !important;
    padding: 14px !important;
  }
}

@media (max-width: 1400px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 380px 1fr 440px !important;
    gap: 12px !important;
    padding: 12px !important;
  }
}

@media (max-width: 1200px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 340px 1fr 400px !important;
    gap: 10px !important;
    padding: 10px !important;
  }
}

/* ============================================================================
   CLEANUP
   ============================================================================ */

/* Remove any mode-specific classes that might interfere */
.mode-terrain,
.mode-impact,
.mode-compare,
.mode-simulate {
  /* Don't change grid layout based on mode */
}

/* Ensure CommandDeckBezel doesn't add extra padding */
[class*="CommandDeckBezel"],
[class*="commandDeckBezel"] {
  padding: 0 !important;
  margin: 0 !important;
  height: 100% !important;
}

/* Fix any nested scrolling issues */
[class*="CommandDeckBezel"] > div,
[class*="commandDeckBezel"] > div {
  height: 100% !important;
  overflow: visible !important;
}

/* ============================================================================
   GOD MODE TYPOGRAPHY — Section Headers
   ============================================================================ */

/* All section headers: GROWTH, RESILIENCE, MOMENTUM, etc. */
[class*="bezel-title"],
[class*="group-title"],
[class*="section-title"],
[class*="panel-header"] h2,
[class*="panel-header"] h3,
.slider-section-header,
[data-kpi-group] [class*="title"],
.kpi-bezel-title {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.25em !important;
  color: rgba(34, 211, 238, 0.8) !important;
}

