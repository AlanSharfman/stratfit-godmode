/* src/styles/godmode-unified-layout.css */
/* STRATFIT GOD MODE — TRUE FRAMEWORK LAYOUT */
/* The Rack System: Perfect height alignment across all panels */

/* ============================================================================
   RESET: Lock viewport - NO SCROLLING
   ============================================================================ */

html, body, #root {
  height: 100vh !important;
  max-height: 100vh !important;
  overflow: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
}

.app,
[class*="App"] {
  height: 100vh !important;
  max-height: 100vh !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
}

/* ============================================================================
   HEADER — Fixed 56px (UnifiedHeader handles this)
   ============================================================================ */

.unified-header,
header.unified-header {
  flex-shrink: 0 !important;
  height: 56px !important;
  min-height: 56px !important;
  max-height: 56px !important;
}

/* Hide old header */
.header:not(.unified-header) {
  display: none !important;
}

/* ============================================================================
   MAIN CONTENT — 3-Column Grid, ALL START AT TOP
   ============================================================================ */

.main-content,
[class*="main-content"],
[class*="mainContent"] {
  flex: 1 !important;
  display: grid !important;
  /* MOUNTAIN REDUCED 75% total: Wider side panels */
  grid-template-columns: 520px 1fr 580px !important;
  grid-template-rows: 1fr !important;
  gap: 16px !important;
  padding: 16px !important;
  height: calc(100vh - 56px) !important;
  max-height: calc(100vh - 56px) !important;
  overflow: hidden !important;
  background: transparent !important;
  align-items: stretch !important;
}

/* ============================================================================
   LEFT COLUMN — Control Panel with JEWEL BEZEL
   ============================================================================ */

.left-column,
[class*="left-column"],
aside.left-column {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  max-height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  
  /* JEWEL BEZEL: Darker 70% opacity */
  background: rgba(15, 23, 42, 0.7) !important;
  
  /* Heavy frosted glass */
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  
  /* The "Jewel" Inner Glow */
  box-shadow: 
    inset 0 1px 0 0 rgba(255, 255, 255, 0.1),
    inset 0 0 0 1px rgba(0, 240, 255, 0.05),
    0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
  
  /* Machined border */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  
  /* Tight precision curve */
  border-radius: 10px !important;
  padding: 0 !important;
  
  /* Subtle scrollbar */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(34, 211, 238, 0.2) transparent !important;
}

.left-column::-webkit-scrollbar {
  width: 4px !important;
}

.left-column::-webkit-scrollbar-track {
  background: transparent !important;
}

.left-column::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 2px !important;
}

/* Hide Active Situation - it's in header now */
.scenario-area,
[class*="scenario-area"],
[class*="ActiveScenario"]:not(.unified-header *) {
  display: none !important;
}

/* Hide spacer */
.sf-leftSpacer,
[class*="sf-leftSpacer"] {
  display: none !important;
}

/* sf-leftStack - full height, no gaps */
.sf-leftStack,
[class*="sf-leftStack"] {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  gap: 0 !important;
  padding: 0 !important;
}

/* Sliders container - full height */
.sliders-container,
[class*="sliders-container"] {
  flex: 1 !important;
  height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  border: none !important;
  box-shadow: none !important;
  padding: 12px !important;
}

/* ============================================================================
   CENTER COLUMN — KPIs at top, Mountain below
   ============================================================================ */

.center-column,
[class*="center-column"],
main.center-column {
  display: flex !important;
  flex-direction: column !important;
  gap: 28px !important; /* MORE GAP - push mountain down */
  height: 100% !important;
  max-height: 100% !important;
  overflow: hidden !important;
  padding: 0 !important;
}

/* ============================================================================
   KPI SECTION — COMPACT PREMIUM DASHBOARD (130px Max Height)
   ============================================================================ */

.kpi-section,
[class*="kpi-section"],
[data-tour="kpis"] {
  /* KPI ROW: Fixed height, spread horizontally */
  flex-shrink: 0 !important;
  display: flex !important;
  justify-content: center !important;
  align-items: stretch !important;
  width: 100% !important;
  height: 140px !important;
  min-height: 140px !important;
  max-height: 140px !important;
  padding: 0 !important;
  margin: 0 !important;
  transform: none !important;
  position: relative !important;
  z-index: 20 !important;
  overflow: visible !important;
}

/* KPI Console - centered container */
.kpi-command-console {
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  height: 100% !important;
  padding: 0 !important;
}

.top-kpi-row {
  display: flex !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
  left: 0 !important;
}

.console-container {
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  height: 100% !important;
  padding: 0 !important;
}

/* KPI GROUPS — Spread horizontally across full width */
.kpi-groups {
  display: flex !important;
  flex-direction: row !important;
  justify-content: space-between !important;
  align-items: stretch !important;
  gap: 20px !important;
  width: 100% !important;
  height: 100% !important;
}

/* Remove separator lines */
.kpi-groups > div + div::before {
  display: none !important;
}

/* Each KPI group takes equal space */
.sf-kpi--wide,
.sf-kpi--narrow,
.kpi-groups > div {
  flex: 1 1 0 !important;
  min-width: 0 !important;
  height: 100% !important;
}

/* KPI Console wrapper - full width */
.kpi-command-console {
  width: 100% !important;
  height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

.top-kpi-row {
  display: flex !important;
  width: 100% !important;
  height: 100% !important;
  left: 0 !important;
  position: relative !important;
}

.console-container {
  width: 100% !important;
  height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* ============================================================================
   KPI BEZEL WRAPPER — Reset the complex bezel structure
   ============================================================================ */

[data-kpi-group] > div {
  height: 100% !important;
}

/* Reset the wrap height */
[class*="KPIBezel"] [class*="wrap"],
[class*="kpi-bezel"] [class*="wrap"] {
  height: 100% !important;
  min-height: 0 !important;
  max-height: 100% !important;
  margin: 0 !important;
}

/* Flatten the 4-layer chassis into simple card */
[class*="KPIBezel"] [class*="chassis"],
[class*="kpi-bezel"] [class*="chassis"] {
  height: 100% !important;
  padding: 0 !important;
  
  /* MACHINED BEZEL: Tight corners, thin metal */
  border-radius: 8px !important; /* rounded-lg */
  
  /* JEWEL BOX: Darker bg so Cyan pops */
  background: rgba(15, 23, 42, 0.8) !important; /* bg-[#0F172A]/80 */
  
  /* Thin metal border */
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  
  /* The secret inner glow + depth shadow */
  box-shadow: 
    inset 0 1px 0 0 rgba(255, 255, 255, 0.1),
    inset 0 0 20px 0 rgba(0, 0, 0, 0.5),
    0 20px 40px -10px rgba(0, 0, 0, 0.8) !important;
  
  overflow: visible !important; /* Don't clip shadows */
}

[class*="KPIBezel"] [class*="rim"],
[class*="kpi-bezel"] [class*="rim"] {
  height: 100% !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

[class*="KPIBezel"] [class*="step"],
[class*="kpi-bezel"] [class*="step"] {
  height: 100% !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

[class*="KPIBezel"] [class*="well"],
[class*="kpi-bezel"] [class*="well"] {
  height: 100% !important;
  padding: 12px 16px !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* ============================================================================
   KPI GROUP HEADER — Cyan accent title
   ============================================================================ */

[class*="KPIBezel"] [class*="header"],
[class*="kpi-bezel"] [class*="header"] {
  height: auto !important;
  min-height: 0 !important;
  padding: 0 0 6px 0 !important;
  margin-bottom: 6px !important;
  background: transparent !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06) !important;
}

[class*="KPIBezel"] [class*="title"],
[class*="kpi-bezel"] [class*="title"] {
  font-size: 11px !important;
  font-weight: 700 !important;
  letter-spacing: 0.1em !important;
  text-transform: uppercase !important;
  color: #22d3ee !important; /* CYAN ACCENT */
  text-shadow: 0 0 10px rgba(34, 211, 238, 0.3) !important;
  padding: 0 !important;
  transform: none !important;
}

[class*="KPIBezel"] [class*="title"]::after,
[class*="kpi-bezel"] [class*="title"]::after {
  display: none !important;
}

[class*="KPIBezel"] [class*="divider"],
[class*="kpi-bezel"] [class*="divider"] {
  display: none !important;
}

/* ============================================================================
   KPI GRID — Horizontal row of metrics
   ============================================================================ */

[class*="KPIBezel"] [class*="grid"],
[class*="kpi-bezel"] [class*="grid"] {
  display: flex !important;
  flex-direction: row !important;
  gap: 16px !important;
  padding: 0 !important;
  flex: 1 !important;
  align-items: stretch !important;
}

/* ============================================================================
   KPI INSTRUMENT CARDS — COMPACT METRICS
   ============================================================================ */

.kpi-instrument {
  position: relative !important;
  flex: 1 !important;
  min-width: 0 !important;
  height: 100% !important;
  min-height: 0 !important;
  max-height: 100% !important;
  overflow: visible !important;
}

.instrument-border {
  height: 100% !important;
  background: rgba(0, 0, 0, 0.2) !important;
  border-radius: 6px !important; /* Tight corners */
  padding: 8px !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;
}

.instrument-well {
  height: 100% !important;
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
  box-shadow: none !important;
}

/* ============================================================================
   KPI TYPOGRAPHY — COMPACT DASHBOARD
   ============================================================================ */

.instrument-label-row {
  height: auto !important;
  min-height: 0 !important;
}

.instrument-label {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace !important;
  font-size: 9px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.08em !important;
  color: rgba(255, 255, 255, 0.5) !important;
  line-height: 1 !important;
}

.instrument-value-row {
  display: flex !important;
  align-items: baseline !important;
  gap: 4px !important;
}

.value-display {
  font-family: 'JetBrains Mono', 'SF Mono', monospace !important;
  font-size: 18px !important;
  font-weight: 700 !important;
  color: rgba(255, 255, 255, 0.95) !important;
  letter-spacing: -0.02em !important;
  line-height: 1.1 !important;
}

.value-unit {
  font-size: 10px !important;
  color: rgba(255, 255, 255, 0.35) !important;
  margin-left: 2px !important;
}

.value-secondary {
  font-size: 10px !important;
  color: rgba(255, 255, 255, 0.4) !important;
}

/* ============================================================================
   KPI WIDGETS/SPARKLINES — JEWEL BOX WIDGET LAYER
   ============================================================================ */

.instrument-visual {
  /* WIDGET LAYER: Force visible with z-index */
  position: relative !important;
  z-index: 10 !important;
  opacity: 1 !important;
  visibility: visible !important;
  
  /* Widget dimensions: h-12 w-full mt-auto */
  height: 48px !important;
  min-height: 48px !important;
  max-height: 48px !important;
  width: 100% !important;
  margin-top: auto !important;
  
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  
  background: transparent !important;
  border-radius: 0 !important;
  border: none !important;
  padding: 4px 0 !important;
  overflow: visible !important;
}

.instrument-visual > * {
  position: relative !important;
  z-index: 10 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

.instrument-svg,
.instrument-visual svg {
  width: 100% !important;
  height: 40px !important;
  min-height: 40px !important;
  max-height: 40px !important;
  opacity: 1 !important;
  visibility: visible !important;
  position: relative !important;
  z-index: 10 !important;
  /* Cyan glow bloom */
  filter: drop-shadow(0 0 4px rgba(0, 217, 255, 0.5)) !important;
}

/* FORCE CYAN: Hardcode stroke/fill */
.instrument-visual svg path,
.instrument-visual svg line,
.instrument-visual svg polyline {
  stroke: #00D9FF !important; /* Cyan */
  stroke-width: 2px !important;
}

.instrument-visual svg rect {
  fill: rgba(0, 217, 255, 0.3) !important;
}

.instrument-visual svg circle {
  fill: #00D9FF !important;
  stroke: #FFFFFF !important;
}

/* Canvas elements (Chart.js) */
.instrument-visual canvas {
  position: relative !important;
  z-index: 10 !important;
  opacity: 1 !important;
  visibility: visible !important;
  height: 40px !important;
  width: 100% !important;
}

/* Active state */
.kpi-instrument.active .instrument-label {
  color: #22d3ee !important;
}

.kpi-instrument.active .value-display {
  color: #22d3ee !important;
  text-shadow: 0 0 10px rgba(34, 211, 238, 0.4) !important;
}

/* Hover state */
.kpi-instrument:hover {
  transform: none !important;
}

.kpi-instrument:hover .value-display {
  color: rgba(255, 255, 255, 1) !important;
}

/* Glow layer - minimal */
.instrument-glow {
  display: none !important;
}

/* Focus ring - subtle */
.focus-ring {
  display: none !important;
}

/* ============================================================================
   MOUNTAIN COMPOUND — Fills remaining center space
   ============================================================================ */

[class*="sfCenterRoot"],
[class*="CenterViewPanel"] {
  /* MOUNTAIN: Fill remaining space, touch the floor */
  flex: 1 !important;
  min-height: 0 !important;
  max-height: none !important;
  height: auto !important;
  display: flex !important;
  flex-direction: column !important;
  
  /* MACHINED BEZEL: Thin metal */
  background: #000 !important;
  border-radius: 8px !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  
  box-shadow: 
    inset 0 1px 0 0 rgba(255, 255, 255, 0.05),
    0 10px 30px -10px rgba(0, 0, 0, 0.6) !important;
  
  overflow: hidden !important;
  margin: 0 !important;
  margin-top: 8px !important; /* Push mountain down further */
}

[class*="sfMountainStage"] {
  flex: 1 !important;
  min-height: 0 !important;
  border-radius: 12px !important;
}

/* Hide ViewModeSelector inside mountain - tabs are in header */
[class*="sfViewSelectorInner"],
[class*="ViewModeSelector"]:not(.unified-header *) {
  display: none !important;
}

/* ============================================================================
   RIGHT COLUMN — Scenario Intelligence with THICK JEWEL BEZEL
   ============================================================================ */

.right-column,
[class*="right-column"],
aside.right-column,
[data-tour="intel"] {
  display: flex !important;
  flex-direction: column !important;
  height: calc(100% - 12px) !important; /* Account for top margin */
  max-height: calc(100% - 12px) !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  
  /* JEWEL BEZEL: Darker 70% opacity */
  background: rgba(15, 23, 42, 0.7) !important;
  
  /* Heavy frosted glass */
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  
  /* THICK BEZEL: Enhanced inner glow and shadows */
  box-shadow: 
    inset 0 2px 0 0 rgba(255, 255, 255, 0.12),
    inset 0 0 0 2px rgba(0, 240, 255, 0.08),
    inset 0 -1px 0 0 rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.08),
    0 30px 60px -15px rgba(0, 0, 0, 0.85) !important;
  
  /* THICKER Machined border */
  border: 2px solid rgba(255, 255, 255, 0.12) !important;
  
  /* Precision curve */
  border-radius: 12px !important;
  padding: 0 !important;
  
  /* MOVE DOWN 3mm (~11px) */
  margin-top: 11px !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  margin-bottom: 0 !important;
  align-self: flex-start !important;
  
  /* Subtle scrollbar */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(34, 211, 238, 0.2) transparent !important;
}

.right-column::-webkit-scrollbar,
[data-tour="intel"]::-webkit-scrollbar {
  width: 4px !important;
}

.right-column::-webkit-scrollbar-track,
[data-tour="intel"]::-webkit-scrollbar-track {
  background: transparent !important;
}

.right-column::-webkit-scrollbar-thumb,
[data-tour="intel"]::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 2px !important;
}

/* AI Intelligence Component fills the right column */
[class*="AIIntelligence"],
[class*="ScenarioIntelligence"],
[class*="aiIntelligence"] {
  flex: 1 !important;
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}

/* ============================================================================
   RESPONSIVE
   ============================================================================ */

@media (max-width: 1600px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 500px 1fr 560px !important;
    gap: 14px !important;
    padding: 14px !important;
  }
}

@media (max-width: 1400px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 460px 1fr 520px !important;
    gap: 12px !important;
    padding: 12px !important;
  }
}

@media (max-width: 1200px) {
  .main-content,
  [class*="main-content"] {
    grid-template-columns: 420px 1fr 480px !important;
    gap: 10px !important;
    padding: 10px !important;
  }
}

/* ============================================================================
   CLEANUP
   ============================================================================ */

/* Remove any mode-specific classes that might interfere */
.mode-terrain,
.mode-impact,
.mode-compare,
.mode-simulate {
  /* Don't change grid layout based on mode */
}

/* Ensure CommandDeckBezel doesn't add extra padding */
[class*="CommandDeckBezel"],
[class*="commandDeckBezel"] {
  padding: 0 !important;
  margin: 0 !important;
  height: 100% !important;
}

/* Fix any nested scrolling issues */
[class*="CommandDeckBezel"] > div,
[class*="commandDeckBezel"] > div {
  height: 100% !important;
  overflow: visible !important;
}

/* ============================================================================
   GOD MODE TYPOGRAPHY — Section Headers
   ============================================================================ */

/* All section headers: GROWTH, RESILIENCE, MOMENTUM, etc. */
[class*="bezel-title"],
[class*="group-title"],
[class*="section-title"],
[class*="panel-header"] h2,
[class*="panel-header"] h3,
.slider-section-header,
[data-kpi-group] [class*="title"],
.kpi-bezel-title {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.25em !important;
  color: rgba(34, 211, 238, 0.8) !important;
}

